templates.config {
  files = config.vala
  variables = %VERSION%=$(project.version) %LIBRARY_DIRECTORY%=$(options.library-directory)
}

programs {
  bake-template {
    sources = bake-template.vala
    vala-packages = posix
  }

  bake-gettext {
    sources = bake-gettext.vala
    vala-packages = posix
  }

  bake-test {
    sources = bake-test.vala
    vala-packages = posix
  }

  bake {
    sources = bake.vala \
              builder.vala \
              config.vala \
              fixes.vapi \
              module-bzip.vala \
              module-bzr.vala \
              module-clang.vala \
              module-data.vala \
              module-dpkg.vala \
              module-gcc.vala \
              module-gettext.vala \
              module-ghc.vala \
              module-git.vala \
              module-gnome.vala \
              module-gsettings.vala \
              module-gtk.vala \
              module-gzip.vala \
              module-java.vala \
              module-launchpad.vala \
              module-mallard.vala \
              module-man.vala \
              module-mono.vala \
              module-python.vala \
              module-release.vala \
              module-rpm.vala \
              module-script.vala \
              module-vala.vala \
              module-xdg.vala \
              module-xzip.vala \
              pkg-config.vala \
              recipe.vala \
              rule.vala
     vala-packages = posix gio-2.0
     packages = gio-2.0
     compile-flags = -DGETTEXT_PACKAGE=\"bake\"
   }
}

data.bootstrap {
  files = config-bootstrap.vala
  install = false
}

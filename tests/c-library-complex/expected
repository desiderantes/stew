!bake
mkdir -p .built
gcc -fPIC -DFOO=1 -MMD -MF .built/test1.d -c test1.c -o .built/test1.o
gcc -fPIC -DFOO=1 -MMD -MF .built/test2.d -c test2.c -o .built/test2.o
gcc -fPIC -DFOO=1 -MMD -MF .built/test3.d -c test3.c -o .built/test3.o
gcc -o libtest.so.0 -shared .built/test1.o .built/test2.o .built/test3.o -lm
bake-gettext --mime-type text/x-csrc --output .built/test1.c.pot test1.c
bake-gettext --mime-type text/x-csrc --output .built/test2.c.pot test2.c
bake-gettext --mime-type text/x-csrc --output .built/test3.c.pot test3.c
msgcat --force-po --output-file=test.pot .built/test1.c.pot .built/test2.c.pot .built/test3.c.pot
(exit SUCCESS)
!bake install
mkdir -p /usr/lib
cp libtest.so.0 /usr/lib/libtest.so.0
cp libtest.so /usr/lib/libtest.so
mkdir -p /usr/include/test-0
cp test.h /usr/include/test-0/test.h
mkdir -p /usr/lib/pkgconfig
cp test-0.pc /usr/lib/pkgconfig/test-0.pc
(exit SUCCESS)
!bake clean
rm -f libtest.so.0
rm -rf .built/
rm -f test.pot
rm -f libtest.so
rm -f test-0.pc
(exit SUCCESS)
